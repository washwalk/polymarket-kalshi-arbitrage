(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[562],{3293:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(4568),n=r(7620),s=r(3041),c=r(9031);function i(){let e=(0,s.useParams)();e.id;let[t,r]=(0,n.useState)(null),[i,o]=(0,n.useState)(!1),[l,d]=(0,n.useState)("");async function u(){try{let t=window.location.hash.slice(1);if(!t)throw Error("Decryption key missing from URL.");let a=await fetch("/api/secret/".concat(e.id));if(!a.ok)throw Error("This secret has already been burned or expired.");let{iv:n,data:s}=await a.json(),i=await (0,c.Fh)(t),l=await (0,c.PV)(s,n,i);r(l),o(!0)}catch(e){d(e.message)}}return(0,a.jsx)("main",{className:"max-w-3xl mx-auto px-6 py-20 text-center",children:i?(0,a.jsxs)("div",{className:"text-left space-y-4 animate-in zoom-in-95 duration-300",children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsx)("span",{className:"text-xs text-red-500 font-bold uppercase tracking-widest italic",children:"This secret has been destroyed."})}),(0,a.jsx)("pre",{className:"p-6 bg-white dark:bg-neutral-900 border border-gray-300 dark:border-neutral-800 rounded-xl overflow-x-auto font-mono text-emerald-400",children:t})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-black dark:text-white",children:"Ready to reveal secret?"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-neutral-400",children:"Once opened, this link will be destroyed forever."}),l?(0,a.jsx)("p",{className:"text-red-400 bg-red-400/10 p-4 rounded-lg",children:l}):(0,a.jsx)("button",{onClick:u,className:"px-8 py-3 bg-black dark:bg-white text-white dark:text-black font-bold rounded-xl hover:bg-gray-800 dark:hover:bg-neutral-200 transition",children:"Reveal Secret"})]})})}},9031:(e,t,r)=>{"use strict";r.d(t,{Ei:()=>o,FA:()=>d,Fh:()=>l,PV:()=>u,rh:()=>i});let a=new TextEncoder,n=new TextDecoder;function s(e){return btoa(String.fromCharCode(...new Uint8Array(e)))}function c(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}async function i(){return crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async function o(e){return s(await crypto.subtle.exportKey("raw",e))}async function l(e){return crypto.subtle.importKey("raw",c(e),"AES-GCM",!0,["decrypt"])}async function d(e,t){let r=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,a.encode(e));return{iv:s(r.buffer),data:s(n)}}async function u(e,t,r){let a=await crypto.subtle.decrypt({name:"AES-GCM",iv:c(t)},r,c(e));return n.decode(a)}},9657:(e,t,r)=>{Promise.resolve().then(r.bind(r,3293))}},e=>{e.O(0,[587,18,358],()=>e(e.s=9657)),_N_E=e.O()}]);